# New endpoints to add to mock_server.py (insert before "if __name__ =="  line)

@app.get("/api/v1/voices/preview/{voice}")
async def preview_voice(voice: str):
    """Generate voice preview audio"""
    try:
        import edge_tts
        import tempfile
        
        # Create sample text for preview
        sample_text = " Hello! This is a preview of the selected voice."
        
        # Generate TTS audio
        temp_file = tempfile.NamedTemporaryFile(delete=False, suffix='.mp3')
        communicate = edge_tts.Communicate(sample_text, voice)
        await communicate.save(temp_file.name)
        
        return FileResponse(
            temp_file.name,
            media_type='audio/mpeg',
            filename=f'preview_{voice}.mp3'
        )
    except ImportError:
        # Fallback: Return error if edge-tts not available
        raise HTTPException(
            status_code=501,
            detail="Voice preview not available in mock mode. Install edge-tts for previews."
        )
    except Exception as e:
        raise HTTPException(500, f"Voice preview failed: {str(e)}")


@app.post("/api/v1/avatars/generate")
async def generate_avatar(
    prompt: str = Form(...),
    style: str = Form("realistic")
) -> JSONResponse:
    """Mock avatar generation endpoint"""
    
    # Mock response - return a placeholder image URL
    # In production, this would call an AI image generation service
    
    job_id = str(uuid.uuid4())
    
    # Use a placeholder service for demo
    placeholder_url = f"https://api.dicebear.com/7.x/avataaars/png?seed={job_id}&size=512"
    
    return JSONResponse({
        "job_id": job_id,
        "status": "completed",
        "url": placeholder_url,
        "message": f"Generated avatar with style: {style}"
    })
